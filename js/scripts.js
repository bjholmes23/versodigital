!function(e){"use strict";function t(){var t=e(window).height();e(".fullscreen").children(".container").each(function(i){var a=e(this).innerHeight()+270;a>=t?e(this).parent(".fullscreen").addClass("not-overflow"):e(this).parent(".fullscreen").removeClass("not-overflow")})}e(document).ready(function(){s(e(this)),n(),i(e),r(),l(e(this)),d(e(this)),h(e(this)),u(e(this)),p(e(this)),m(e(this)),o(e(this)),f(e(this)),c(e(this))}),jQuery(window).load(function(){v(e(this)),s(e(this)),n(),w(e(this)),C(e(this)),p(e(this)),e(".section").each(function(){a(e(this))})}),jQuery(window).resize(function(){w(e(this))});var i=function(t){e(".hero-slider").flexslider({animation:"fade",direction:"horizontal",animationSpeed:1e3,animationLoop:!0,smoothHeight:!1,directionNav:!1,controlsContainer:".hero-controls",controlNav:!0,slideshow:!0,useCSS:!0,after:function(t){e("li.flex-active-slide").hasClass("dark-slider")?e(".header").addClass("white-header"):e(".header").removeClass("white-header"),e("li.flex-active-slide").hasClass("white-slider")?e(".header").addClass("black-header"):e(".header").removeClass("black-header")},start:function(t){e("li.flex-active-slide").hasClass("dark-slider")?e(".header").addClass("inverse-header"):e(".header").removeClass("inverse-header"),e("li.flex-active-slide").hasClass("white-slider")?e(".header").addClass("black-header"):e(".header").removeClass("black-header")}}),e(".flex-prev, .flex-next").on("click",function(){var t=e(this).attr("href");return e(".hero-slider").flexslider(t),!1}),e(".flexslider").flexslider({animation:"fade",controlNav:!0,useCSS:!0,directionNav:!1})},a=function(e){e.find(".animate").each(function(e){var t=jQuery(this),i=t.data("animate");t.waypoint(function(a){t.css({"-webkit-animation-delay":.1*e+"s","-moz-animation-delay":.1*e+"s","-ms-animation-delay":.1*e+"s","-o-animation-delay":.1*e+"s","animation-delay":.1*e+"s"}),t.removeClass("animate").addClass("animated "+i).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){jQuery(this).removeClass(i+" animated")})},{offset:"80%",triggerOnce:!0})})},n=function(t){e.stellar({horizontalScrolling:!1,responsive:!0})},o=function(t){e(".video-background").each(function(){e(this).YTPlayer({videoURL:e(this).data("video-id"),containment:"self",showControls:!1,autoPlay:!0,loop:!0,mute:!0,startAt:0,opacity:1,addRaster:!0,quality:"default"})})},s=function(i){i.find(".fullscreen").each(function(){var i=e(this),a=function(){i.height(e(window).height()),t()};a(),e(window).resize(function(){a()})})},r=function(t){var i=function(){e(window).width()>991?e(".auto-height").each(function(){var t=e(this),i=(t.height(),t.parent().parent().height());t.css("height",i)}):e(".auto-height").each(function(){var t=e(this);t.css("height","auto")})};i(),e(window).resize(function(){i()})},l=function(t){t.find(".progress-bar").each(function(){var t=e(this);t.waypoint(function(e){t.css("width",t.attr("aria-valuenow")+"%")},{offset:"80%",triggerOnce:!0})})},d=function(t){e(".menu-toggle").on("click",function(){e(this).closest("header").toggleClass("menu-open"),e(this).closest("header").hasClass("menu-3")&&e(this).toggleClass("active")});var i=function(){e(window).width()<991?e(".menu").addClass("mobile-menu"):e(".menu").removeClass("mobile-menu")};i(),e(window).resize(function(){i()})},c=function(t){var i=e(".mobile-menu");i.find("li.dropdown").hover(function(){var t=e(this);t.find(">.dropdown-menu").slideDown()},function(){e(this).find(">.dropdown-menu").slideUp()})},h=function(t){e(".owl-carousel").each(function(){var t=e(this);t.owlCarousel({loop:!0,margin:0,responsiveClass:!0,responsive:{0:{items:1,nav:!0},768:{items:t.data("col-sm"),nav:!1},992:{items:t.data("col-md"),nav:!0,loop:!1},1200:{items:t.data("col-lg"),nav:!0,loop:!1}}})})},u=function(e){jQuery(function(){var e=jQuery(".section"),t=jQuery(".menu a");e.waypoint({handler:function(e){var i;i=jQuery(this),"up"===e&&(i=i.prev());var a=jQuery('.menu a[href="#'+i.attr("id")+'"]');t.removeClass("active"),a.addClass("active"),i.addClass("active-section")},offset:"35%"})}),jQuery(".menu").localScroll({offset:-60,duration:500})},f=function(t){e('a[href*=#]:not([href=#]):not([data-toggle="tab"])').on("click",function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var t=e(this.hash);if(t=t.length?t:e("[name="+this.hash.slice(1)+"]"),t.length)return e("html,body").animate({scrollTop:t.offset().top-60},500),!1}})},v=function(t){e(".loader").css("opacity",0),setTimeout(function(){e(".loader").hide(),e("body").addClass("loaded")},600)},m=function(t){e('[data-toggle="tooltip"]').tooltip();var i;e(".nav-tabs > li > a").on("click",function(){e(this).parent("li").hasClass("active")||(i=e(".tab-content > .tab-pane").filter(e(this).attr("href")).height(),e(".tab-content").animate({height:i},function(){e(".tab-content").css("height","auto")}))});var a=e(".accordion > dd").hide();a.first().slideDown("easeOutExpo"),e(".accordion > dt > a").first().addClass("active"),e(".accordion > dt > a").on("click",function(){var t=e(this).parent().next("dd");return e(".accordion > dt > a").removeClass("active"),e(this).addClass("active"),a.not(t).slideUp("easeInExpo"),e(this).parent().next().slideDown("easeOutExpo"),!1});e(".toggle > dd").hide();e(".toggle > dt > a").on("click",function(){if(e(this).hasClass("active"))e(this).parent().next().slideUp("easeOutExpo"),e(this).removeClass("active");else{e(this).parent().next("dd");e(this).addClass("active"),e(this).parent().next().slideDown("easeOutExpo")}return!1})},p=function(t){e("<div class='blank-space'></div>").insertAfter("#header"),e(window).scroll(function(){window.scrollY>0&&!e(".mobile-toggle").is(":visible")?e("#header").addClass("sticky"):e("#header").removeClass("sticky")})},w=function(t){var i=e(".isotope-container");i.isotope({itemSelector:".isotope-item",layoutMode:"masonry",filter:"*",animationOptions:{duration:750,easing:"linear",queue:!1}}),e("ul.portfolio-filter a").on("click",function(){var t=e(this).attr("data-filter");return i.isotope({filter:t,animationOptions:{duration:750,easing:"linear",queue:!1}}),!1});var a=e("ul.portfolio-filter"),n=a.find("a");n.on("click",function(){var t=e(this);if(t.hasClass("selected"))return!1;var i=t.parents("ul.portfolio-filter");i.find(".selected").removeClass("selected"),t.addClass("selected")})},C=function(t){var i=e(".isotope-fit-rows");i.isotope({layoutMode:"fitRows",itemSelector:".isotope-item"})}}(jQuery);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOlsiJCIsImZ1bGxzY3JlZW5GaXgiLCJoIiwid2luZG93IiwiaGVpZ2h0IiwiY2hpbGRyZW4iLCJlYWNoIiwiaSIsImhjIiwidGhpcyIsImlubmVySGVpZ2h0IiwicGFyZW50IiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImRvY3VtZW50IiwicmVhZHkiLCJmdWxsc2NyZWVuX3NlY3Rpb24iLCJwYXJhbGxheF9pbWFnZSIsImZsZXhfc2xpZGVyIiwiZml4X2hlaWdodCIsInByb2dyZXNzX2JhciIsIm1vYmlsZV9uYXYiLCJvd2xfY2Fyb3VzZWwiLCJvbmVfcGFnZV9zY3JvbGwiLCJzdGlja3lfaGVhZGVyIiwiYnNfdG9vbHRpcCIsInlvdXR1YmVfYmciLCJzY3JvbGxfZG93biIsIm1vYmlsZV90b3VjaCIsImpRdWVyeSIsImxvYWQiLCJzaXRlX2xvYWRlciIsImlzb3RvcGVfZ28iLCJpc290b3BlX2ZpdF9yb3dzIiwiYW5pbWF0ZV9zdGFydCIsInJlc2l6ZSIsIiR0aGlzIiwiZmxleHNsaWRlciIsImFuaW1hdGlvbiIsImRpcmVjdGlvbiIsImFuaW1hdGlvblNwZWVkIiwiYW5pbWF0aW9uTG9vcCIsInNtb290aEhlaWdodCIsImRpcmVjdGlvbk5hdiIsImNvbnRyb2xzQ29udGFpbmVyIiwiY29udHJvbE5hdiIsInNsaWRlc2hvdyIsInVzZUNTUyIsImFmdGVyIiwic2xpZGVyIiwiaGFzQ2xhc3MiLCJzdGFydCIsIm9uIiwiaHJlZiIsImF0dHIiLCJmaW5kIiwiJGl0ZW0iLCJkYXRhIiwid2F5cG9pbnQiLCJjc3MiLCItd2Via2l0LWFuaW1hdGlvbi1kZWxheSIsIi1tb3otYW5pbWF0aW9uLWRlbGF5IiwiLW1zLWFuaW1hdGlvbi1kZWxheSIsIi1vLWFuaW1hdGlvbi1kZWxheSIsImFuaW1hdGlvbi1kZWxheSIsIm9uZSIsIm9mZnNldCIsInRyaWdnZXJPbmNlIiwic3RlbGxhciIsImhvcml6b250YWxTY3JvbGxpbmciLCJyZXNwb25zaXZlIiwiWVRQbGF5ZXIiLCJ2aWRlb1VSTCIsImNvbnRhaW5tZW50Iiwic2hvd0NvbnRyb2xzIiwiYXV0b1BsYXkiLCJsb29wIiwibXV0ZSIsInN0YXJ0QXQiLCJvcGFjaXR5IiwiYWRkUmFzdGVyIiwicXVhbGl0eSIsInJlc2l6ZV9oZWlnaHQiLCJhdXRvX2hlaWdodCIsIndpZHRoIiwiZWxlbWVudCIsInBhcmVudF9oZWlnaHQiLCJjbG9zZXN0IiwidG9nZ2xlQ2xhc3MiLCJhZGRfbW1fY2xhc3MiLCIkbWVudSIsImhvdmVyIiwic2xpZGVEb3duIiwic2xpZGVVcCIsIm93bENhcm91c2VsIiwibWFyZ2luIiwicmVzcG9uc2l2ZUNsYXNzIiwiaXRlbXMiLCJuYXYiLDc2OCw5OTIsMTIwMCwic2VjdGlvbnMiLCJuYXZpZ2F0aW9uX2xpbmtzIiwiaGFuZGxlciIsImFjdGl2ZV9zZWN0aW9uIiwicHJldiIsImFjdGl2ZV9saW5rIiwibG9jYWxTY3JvbGwiLCJkdXJhdGlvbiIsImxvY2F0aW9uIiwicGF0aG5hbWUiLCJyZXBsYWNlIiwiaG9zdG5hbWUiLCJ0YXJnZXQiLCJoYXNoIiwibGVuZ3RoIiwic2xpY2UiLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwidG9wIiwic2V0VGltZW91dCIsImhpZGUiLCJ0b29sdGlwIiwidGFiX2hlaWdodCIsImZpbHRlciIsImFsbFBhbmVscyIsImZpcnN0IiwiY3VycmVudCIsIm5leHQiLCJub3QiLCJpbnNlcnRBZnRlciIsInNjcm9sbCIsInNjcm9sbFkiLCJpcyIsIiRjb250YWluZXIiLCJpc290b3BlIiwiaXRlbVNlbGVjdG9yIiwibGF5b3V0TW9kZSIsImFuaW1hdGlvbk9wdGlvbnMiLCJlYXNpbmciLCJxdWV1ZSIsInNlbGVjdG9yIiwiJG9wdGlvblNldHMiLCIkb3B0aW9uTGlua3MiLCIkb3B0aW9uU2V0IiwicGFyZW50cyJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsR0FDQSxZQXFLQSxTQUFBQyxLQUNBLEdBQUFDLEdBQUFGLEVBQUFHLFFBQUFD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WUFBQSxZQUNBdUIsRUFBQXhCLFNBQUEsZUFHQXFCLEVBQUEsU0FBQUcsR0FDQSxHQUFBbUcsR0FBQXZJLEVBQUEsb0JBQ0F1SSxHQUFBQyxTQUNBRSxXQUFBLFVBQ0FELGFBQUEsb0JBSUE1RyIsImZpbGUiOiJzY3JpcHRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCQpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIGZ1bGxzY3JlZW5fc2VjdGlvbigkKHRoaXMpKTtcbiAgICAgICAgcGFyYWxsYXhfaW1hZ2UoKTtcbiAgICAgICAgZmxleF9zbGlkZXIoJCk7XG4gICAgICAgIGZpeF9oZWlnaHQoKTtcbiAgICAgICAgcHJvZ3Jlc3NfYmFyKCQodGhpcykpO1xuICAgICAgICBtb2JpbGVfbmF2KCQodGhpcykpO1xuICAgICAgICBvd2xfY2Fyb3VzZWwoJCh0aGlzKSk7XG4gICAgICAgIG9uZV9wYWdlX3Njcm9sbCgkKHRoaXMpKTtcbiAgICAgICAgc3RpY2t5X2hlYWRlcigkKHRoaXMpKTtcbiAgICAgICAgYnNfdG9vbHRpcCgkKHRoaXMpKTtcbiAgICAgICAgeW91dHViZV9iZygkKHRoaXMpKTtcbiAgICAgICAgc2Nyb2xsX2Rvd24oJCh0aGlzKSk7XG4gICAgICAgIG1vYmlsZV90b3VjaCgkKHRoaXMpKTtcbiAgICB9KTtcblxuICAgIC8qIFdpbmRvdyBMb2FkL0FsbCBNZWRpYSBMb2FkZWQgKi9cbiAgICBqUXVlcnkod2luZG93KS5sb2FkKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHNpdGVfbG9hZGVyKCQodGhpcykpO1xuICAgICAgICBmdWxsc2NyZWVuX3NlY3Rpb24oJCh0aGlzKSk7XG4gICAgICAgIHBhcmFsbGF4X2ltYWdlKCk7XG4gICAgICAgIGlzb3RvcGVfZ28oJCh0aGlzKSk7XG4gICAgICAgIGlzb3RvcGVfZml0X3Jvd3MoJCh0aGlzKSk7XG4gICAgICAgIHN0aWNreV9oZWFkZXIoJCh0aGlzKSk7XG5cbiAgICAgICAgJCgnLnNlY3Rpb24nKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgYW5pbWF0ZV9zdGFydCgkKHRoaXMpKTtcbiAgICAgICAgfSk7XG5cbiAgICB9KTtcblxuICAgIGpRdWVyeSh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbigpIHtcbiAgICAgICAgaXNvdG9wZV9nbygkKHRoaXMpKTtcbiAgICB9KTtcblxuICAgIC8vXG4gICAgLy8gIEZVTkNUSU9OU1xuICAgIC8vXG5cbiAgICAvLyBGbGV4IHNsaWRlclxuICAgIHZhciBmbGV4X3NsaWRlciA9IGZ1bmN0aW9uKCR0aGlzKXtcbiAgICAgICAgJCgnLmhlcm8tc2xpZGVyJykuZmxleHNsaWRlcih7XG4gICAgICAgICAgICBhbmltYXRpb246IFwiZmFkZVwiLFxuICAgICAgICAgICAgZGlyZWN0aW9uOiBcImhvcml6b250YWxcIixcbiAgICAgICAgICAgIGFuaW1hdGlvblNwZWVkOiAxMDAwLFxuICAgICAgICAgICAgYW5pbWF0aW9uTG9vcDogdHJ1ZSxcbiAgICAgICAgICAgIHNtb290aEhlaWdodDogZmFsc2UsXG4gICAgICAgICAgICBkaXJlY3Rpb25OYXY6IGZhbHNlLFxuICAgICAgICAgICAgY29udHJvbHNDb250YWluZXI6IFwiLmhlcm8tY29udHJvbHNcIixcbiAgICAgICAgICAgIGNvbnRyb2xOYXY6IHRydWUsXG4gICAgICAgICAgICBzbGlkZXNob3c6IHRydWUsXG4gICAgICAgICAgICB1c2VDU1M6IHRydWUsXG5cbiAgICAgICAgICAgIC8vIGZvciBUcmFuc3BhcmVudCBIZWFkZXJcbiAgICAgICAgICAgIGFmdGVyOiBmdW5jdGlvbihzbGlkZXIpe1xuICAgICAgICAgICAgICAgIGlmKCQoJ2xpLmZsZXgtYWN0aXZlLXNsaWRlJykuaGFzQ2xhc3MoXCJkYXJrLXNsaWRlclwiKSl7XG4gICAgICAgICAgICAgICAgICAgICQoJy5oZWFkZXInKS5hZGRDbGFzcygnd2hpdGUtaGVhZGVyJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkKCcuaGVhZGVyJykucmVtb3ZlQ2xhc3MoJ3doaXRlLWhlYWRlcicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZigkKCdsaS5mbGV4LWFjdGl2ZS1zbGlkZScpLmhhc0NsYXNzKFwid2hpdGUtc2xpZGVyXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmhlYWRlcicpLmFkZENsYXNzKCdibGFjay1oZWFkZXInKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5oZWFkZXInKS5yZW1vdmVDbGFzcygnYmxhY2staGVhZGVyJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN0YXJ0OiBmdW5jdGlvbihzbGlkZXIpe1xuICAgICAgICAgICAgICAgIGlmKCQoJ2xpLmZsZXgtYWN0aXZlLXNsaWRlJykuaGFzQ2xhc3MoXCJkYXJrLXNsaWRlclwiKSl7XG4gICAgICAgICAgICAgICAgICAgICQoJy5oZWFkZXInKS5hZGRDbGFzcygnaW52ZXJzZS1oZWFkZXInKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5oZWFkZXInKS5yZW1vdmVDbGFzcygnaW52ZXJzZS1oZWFkZXInKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYoJCgnbGkuZmxleC1hY3RpdmUtc2xpZGUnKS5oYXNDbGFzcyhcIndoaXRlLXNsaWRlclwiKSl7XG4gICAgICAgICAgICAgICAgICAgICQoJy5oZWFkZXInKS5hZGRDbGFzcygnYmxhY2staGVhZGVyJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkKCcuaGVhZGVyJykucmVtb3ZlQ2xhc3MoJ2JsYWNrLWhlYWRlcicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCgnLmZsZXgtcHJldiwgLmZsZXgtbmV4dCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB2YXIgaHJlZiA9ICQodGhpcykuYXR0cignaHJlZicpO1xuICAgICAgICAgICAgJCgnLmhlcm8tc2xpZGVyJykuZmxleHNsaWRlcihocmVmKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KVxuXG4gICAgICAgICQoJy5mbGV4c2xpZGVyJykuZmxleHNsaWRlcih7XG4gICAgICAgICAgICBhbmltYXRpb246IFwiZmFkZVwiLFxuICAgICAgICAgICAgY29udHJvbE5hdjogdHJ1ZSxcbiAgICAgICAgICAgIHVzZUNTUzogdHJ1ZSxcbiAgICAgICAgICAgIGRpcmVjdGlvbk5hdjogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQW5pbWF0aW9uIHdpdGggV2F5cG9pbnRzLmpzXG4gICAgdmFyIGFuaW1hdGVfc3RhcnQgPSBmdW5jdGlvbigkdGhpcykge1xuICAgICAgICAkdGhpcy5maW5kKCcuYW5pbWF0ZScpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICAgICAgdmFyICRpdGVtID0galF1ZXJ5KHRoaXMpO1xuICAgICAgICAgICAgdmFyIGFuaW1hdGlvbiA9ICRpdGVtLmRhdGEoXCJhbmltYXRlXCIpO1xuXG4gICAgICAgICAgICAkaXRlbS53YXlwb2ludChmdW5jdGlvbihkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAkaXRlbS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAnLXdlYmtpdC1hbmltYXRpb24tZGVsYXknOiAoaSAqIDAuMSkgKyBcInNcIixcbiAgICAgICAgICAgICAgICAgICAgJy1tb3otYW5pbWF0aW9uLWRlbGF5JzogKGkgKiAwLjEpICsgXCJzXCIsXG4gICAgICAgICAgICAgICAgICAgICctbXMtYW5pbWF0aW9uLWRlbGF5JzogKGkgKiAwLjEpICsgXCJzXCIsXG4gICAgICAgICAgICAgICAgICAgICctby1hbmltYXRpb24tZGVsYXknOiAoaSAqIDAuMSkgKyBcInNcIixcbiAgICAgICAgICAgICAgICAgICAgJ2FuaW1hdGlvbi1kZWxheSc6IChpICogMC4xKSArIFwic1wiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJGl0ZW0ucmVtb3ZlQ2xhc3MoJ2FuaW1hdGUnKS5hZGRDbGFzcygnYW5pbWF0ZWQgJyArIGFuaW1hdGlvbikub25lKCd3ZWJraXRBbmltYXRpb25FbmQgbW96QW5pbWF0aW9uRW5kIE1TQW5pbWF0aW9uRW5kIG9hbmltYXRpb25lbmQgYW5pbWF0aW9uZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzKS5yZW1vdmVDbGFzcyhhbmltYXRpb24gKyAnIGFuaW1hdGVkJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgb2Zmc2V0OiAnODAlJyxcbiAgICAgICAgICAgICAgICB0cmlnZ2VyT25jZTogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvLyAgUGFyYWxsYXggQmFja2dyb3VuZCAoU3RlbGxhci5qcylcbiAgICB2YXIgcGFyYWxsYXhfaW1hZ2UgPSBmdW5jdGlvbigkdGhpcyl7XG4gICAgICAgICQuc3RlbGxhcih7XG4gICAgICAgICAgICBob3Jpem9udGFsU2Nyb2xsaW5nOiBmYWxzZSxcbiAgICAgICAgICAgIHJlc3BvbnNpdmU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIFlvdXR1YmUgVmlkZW8gQmFja2dyb3VuZFxuICAgIHZhciB5b3V0dWJlX2JnID0gZnVuY3Rpb24oJHRoaXMpe1xuICAgICAgICAkKCcudmlkZW8tYmFja2dyb3VuZCcpLmVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICQodGhpcykuWVRQbGF5ZXIoe1xuICAgICAgICAgICAgICAgIHZpZGVvVVJMOiAkKHRoaXMpLmRhdGEoJ3ZpZGVvLWlkJyksXG4gICAgICAgICAgICAgICAgY29udGFpbm1lbnQ6J3NlbGYnLFxuICAgICAgICAgICAgICAgIHNob3dDb250cm9sczpmYWxzZSxcbiAgICAgICAgICAgICAgICBhdXRvUGxheTp0cnVlLFxuICAgICAgICAgICAgICAgIGxvb3A6dHJ1ZSxcbiAgICAgICAgICAgICAgICBtdXRlOnRydWUsXG4gICAgICAgICAgICAgICAgc3RhcnRBdDowLFxuICAgICAgICAgICAgICAgIG9wYWNpdHk6MSxcbiAgICAgICAgICAgICAgICBhZGRSYXN0ZXI6dHJ1ZSxcbiAgICAgICAgICAgICAgICBxdWFsaXR5OidkZWZhdWx0J1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEZ1bGxzY3JlZW4gU2VjdGlvblxuICAgIHZhciBmdWxsc2NyZWVuX3NlY3Rpb24gPSBmdW5jdGlvbigkdGhpcykge1xuICAgICAgICAkdGhpcy5maW5kKCcuZnVsbHNjcmVlbicpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuICAgICAgICAgICAgdmFyIHJlc2l6ZV9oZWlnaHQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMuaGVpZ2h0KCQod2luZG93KS5oZWlnaHQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGZ1bGxzY3JlZW5GaXgoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc2l6ZV9oZWlnaHQoKTtcbiAgICAgICAgICAgICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmVzaXplX2hlaWdodCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBmdWxsc2NyZWVuRml4KCl7XG4gICAgICAgIHZhciBoID0gJCh3aW5kb3cpLmhlaWdodCgpO1xuICAgICAgICAvLyBzZXQgLmZ1bGxzY3JlZW4gaGVpZ2h0XG4gICAgICAgICQoXCIuZnVsbHNjcmVlblwiKS5jaGlsZHJlbihcIi5jb250YWluZXJcIikuZWFjaChmdW5jdGlvbihpKXtcbiAgICAgICAgICAgIHZhciBoYyA9ICQodGhpcykuaW5uZXJIZWlnaHQoKSArIDI3MDtcbiAgICAgICAgICAgIGlmKGhjID49IGgpe1xuICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50KFwiLmZ1bGxzY3JlZW5cIikuYWRkQ2xhc3MoXCJub3Qtb3ZlcmZsb3dcIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50KFwiLmZ1bGxzY3JlZW5cIikucmVtb3ZlQ2xhc3MoXCJub3Qtb3ZlcmZsb3dcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEZpeCBIZWlnaHRcbiAgICB2YXIgZml4X2hlaWdodCA9IGZ1bmN0aW9uKCR0aGlzKSB7XG4gICAgICAgIHZhciBhdXRvX2hlaWdodCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpID4gOTkxKSB7XG4gICAgICAgICAgICAgICAgJCgnLmF1dG8taGVpZ2h0JykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSAkKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gZWxlbWVudC5oZWlnaHQoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudF9oZWlnaHQgPSBlbGVtZW50LnBhcmVudCgpLnBhcmVudCgpLmhlaWdodCgpO1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNzcygnaGVpZ2h0JywgcGFyZW50X2hlaWdodCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoJy5hdXRvLWhlaWdodCcpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gJCh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jc3MoJ2hlaWdodCcsICdhdXRvJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYXV0b19oZWlnaHQoKTtcbiAgICAgICAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGF1dG9faGVpZ2h0KCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFByb2dyZXNzIEJhclxuICAgIHZhciBwcm9ncmVzc19iYXIgPSBmdW5jdGlvbigkdGhpcykge1xuICAgICAgICAkdGhpcy5maW5kKCcucHJvZ3Jlc3MtYmFyJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG5cbiAgICAgICAgICAgICR0aGlzLndheXBvaW50KGZ1bmN0aW9uKGRpcmVjdGlvbikge1xuICAgICAgICAgICAgICAgICR0aGlzLmNzcygnd2lkdGgnLCAkdGhpcy5hdHRyKCdhcmlhLXZhbHVlbm93JykgKyAnJScpO1xuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIG9mZnNldDogJzgwJScsXG4gICAgICAgICAgICAgICAgdHJpZ2dlck9uY2U6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBNb2JpbGUgTWVudVxuICAgIHZhciBtb2JpbGVfbmF2ID1mdW5jdGlvbigkdGhpcykge1xuICAgICAgICAkKCcubWVudS10b2dnbGUnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnaGVhZGVyJykudG9nZ2xlQ2xhc3MoJ21lbnUtb3BlbicpO1xuICAgICAgICAgICAgaWYgKCQodGhpcykuY2xvc2VzdCgnaGVhZGVyJykuaGFzQ2xhc3MoJ21lbnUtMycpKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgYWRkX21tX2NsYXNzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPCA5OTEpIHtcbiAgICAgICAgICAgICAgICAkKCcubWVudScpLmFkZENsYXNzKCdtb2JpbGUtbWVudScpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoJy5tZW51JykucmVtb3ZlQ2xhc3MoJ21vYmlsZS1tZW51JylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBhZGRfbW1fY2xhc3MoKTtcbiAgICAgICAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGFkZF9tbV9jbGFzcygpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gTW9iaWxlIHRvdWNoXG4gICAgdmFyIG1vYmlsZV90b3VjaCA9IGZ1bmN0aW9uKCR0aGlzKXtcblxuICAgICAgICB2YXIgJG1lbnUgPSAkKFwiLm1vYmlsZS1tZW51XCIpO1xuICAgICAgICAkbWVudS5maW5kKCdsaS5kcm9wZG93bicpLmhvdmVyKFxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCc+LmRyb3Bkb3duLW1lbnUnKS5zbGlkZURvd24oKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJz4uZHJvcGRvd24tbWVudScpLnNsaWRlVXAoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgIH1cblxuICAgIC8vIE9XTCBDYXJvdXNlbFxuICAgIHZhciBvd2xfY2Fyb3VzZWwgPSBmdW5jdGlvbigkdGhpcykge1xuICAgICAgICAkKCcub3dsLWNhcm91c2VsJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG4gICAgICAgICAgICAkdGhpcy5vd2xDYXJvdXNlbCh7XG4gICAgICAgICAgICAgICAgbG9vcDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBtYXJnaW46IDAsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2l2ZUNsYXNzOiB0cnVlLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNpdmU6IHtcbiAgICAgICAgICAgICAgICAgICAgMDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYXY6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgNzY4OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtczogJHRoaXMuZGF0YSgnY29sLXNtJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBuYXY6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIDk5Mjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6ICR0aGlzLmRhdGEoJ2NvbC1tZCcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmF2OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9vcDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgMTIwMDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6ICR0aGlzLmRhdGEoJ2NvbC1sZycpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmF2OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9vcDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBPbmUgUGFnZSBTY3JvbGxpbmcgTWVudVxuICAgIHZhciBvbmVfcGFnZV9zY3JvbGwgPSBmdW5jdGlvbiAoJHRoaXMpIHtcbiAgICAgICAgalF1ZXJ5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHNlY3Rpb25zID0galF1ZXJ5KCcuc2VjdGlvbicpO1xuICAgICAgICAgICAgdmFyIG5hdmlnYXRpb25fbGlua3MgPSBqUXVlcnkoJy5tZW51IGEnKTtcbiAgICAgICAgICAgIHNlY3Rpb25zLndheXBvaW50KHtcbiAgICAgICAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uKGRpcmVjdGlvbikge1xuICAgICAgICAgICAgICAgIHZhciBhY3RpdmVfc2VjdGlvbjtcbiAgICAgICAgICAgICAgICBhY3RpdmVfc2VjdGlvbiA9IGpRdWVyeSh0aGlzKTtcbiAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSBcInVwXCIpIGFjdGl2ZV9zZWN0aW9uID0gYWN0aXZlX3NlY3Rpb24ucHJldigpO1xuICAgICAgICAgICAgICAgIHZhciBhY3RpdmVfbGluayA9IGpRdWVyeSgnLm1lbnUgYVtocmVmPVwiIycgKyBhY3RpdmVfc2VjdGlvbi5hdHRyKFwiaWRcIikgKyAnXCJdJyk7XG4gICAgICAgICAgICAgICAgbmF2aWdhdGlvbl9saW5rcy5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICBhY3RpdmVfbGluay5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICBhY3RpdmVfc2VjdGlvbi5hZGRDbGFzcyhcImFjdGl2ZS1zZWN0aW9uXCIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9mZnNldDogJzM1JSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBTQ1JPTEwgRE9XTlxuICAgICAgICBqUXVlcnkoJy5tZW51JykubG9jYWxTY3JvbGwoe1xuICAgICAgICAgICAgb2Zmc2V0OiAtNjAsXG4gICAgICAgICAgICBkdXJhdGlvbjogNTAwXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFNjcm9sbCBEb3duIE1uZXVcbiAgICB2YXIgc2Nyb2xsX2Rvd24gPSBmdW5jdGlvbigkdGhpcykge1xuICAgICAgICAkKCdhW2hyZWYqPSNdOm5vdChbaHJlZj0jXSk6bm90KFtkYXRhLXRvZ2dsZT1cInRhYlwiXSknKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChsb2NhdGlvbi5wYXRobmFtZS5yZXBsYWNlKC9eXFwvLywnJykgPT0gdGhpcy5wYXRobmFtZS5yZXBsYWNlKC9eXFwvLywnJykgJiYgbG9jYXRpb24uaG9zdG5hbWUgPT0gdGhpcy5ob3N0bmFtZSkge1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSAkKHRoaXMuaGFzaCk7XG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0Lmxlbmd0aCA/IHRhcmdldCA6ICQoJ1tuYW1lPScgKyB0aGlzLmhhc2guc2xpY2UoMSkgKyddJyk7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnaHRtbCxib2R5JykuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvcDogdGFyZ2V0Lm9mZnNldCgpLnRvcCAtIDYwXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCA1MDApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgUGFnZSBMb2FkZXIgU2NyZWVuIEZ1bmN0aW9uXG4gICAgdmFyIHNpdGVfbG9hZGVyID0gZnVuY3Rpb24oJHRoaXMpIHtcbiAgICAgICAgJCgnLmxvYWRlcicpLmNzcygnb3BhY2l0eScsIDApO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCgnLmxvYWRlcicpLmhpZGUoKTtcbiAgICAgICAgICAgICQoJ2JvZHknKS5hZGRDbGFzcygnbG9hZGVkJylcbiAgICAgICAgfSwgNjAwKTtcbiAgICB9XG4gICAgLy8gQm9vdHN0cmFwIFRvb2x0aXBcbiAgICB2YXIgYnNfdG9vbHRpcCA9IGZ1bmN0aW9uKCR0aGlzKSB7XG4gICAgICAgICQoJ1tkYXRhLXRvZ2dsZT1cInRvb2x0aXBcIl0nKS50b29sdGlwKClcblxuICAgICAgICB2YXIgdGFiX2hlaWdodDtcbiAgICAgICAgJChcIi5uYXYtdGFicyA+IGxpID4gYVwiKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICBpZiAoISgkKHRoaXMpLnBhcmVudChcImxpXCIpLmhhc0NsYXNzKFwiYWN0aXZlXCIpKSkge1xuICAgICAgICAgICAgICAgIHRhYl9oZWlnaHQgPSAkKFwiLnRhYi1jb250ZW50ID4gLnRhYi1wYW5lXCIpLmZpbHRlcigkKHRoaXMpLmF0dHIoXCJocmVmXCIpKS5oZWlnaHQoKTtcbiAgICAgICAgICAgICAgICAkKFwiLnRhYi1jb250ZW50XCIpLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHRhYl9oZWlnaHRcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAkKFwiLnRhYi1jb250ZW50XCIpLmNzcyhcImhlaWdodFwiLCBcImF1dG9cIik7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBBY2NvcmRpb25cbiAgICAgICAgdmFyIGFsbFBhbmVscyA9ICQoXCIuYWNjb3JkaW9uID4gZGRcIikuaGlkZSgpO1xuICAgICAgICBhbGxQYW5lbHMuZmlyc3QoKS5zbGlkZURvd24oXCJlYXNlT3V0RXhwb1wiKTtcbiAgICAgICAgJChcIi5hY2NvcmRpb24gPiBkdCA+IGFcIikuZmlyc3QoKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcblxuICAgICAgICAkKFwiLmFjY29yZGlvbiA+IGR0ID4gYVwiKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICB2YXIgY3VycmVudCA9ICQodGhpcykucGFyZW50KCkubmV4dChcImRkXCIpO1xuICAgICAgICAgICAgJChcIi5hY2NvcmRpb24gPiBkdCA+IGFcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgYWxsUGFuZWxzLm5vdChjdXJyZW50KS5zbGlkZVVwKFwiZWFzZUluRXhwb1wiKTtcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCkubmV4dCgpLnNsaWRlRG93bihcImVhc2VPdXRFeHBvXCIpO1xuXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gVG9nZ2xlXG4gICAgICAgIHZhciBhbGxUb2dnbGVzID0gJChcIi50b2dnbGUgPiBkZFwiKS5oaWRlKCk7XG5cbiAgICAgICAgJChcIi50b2dnbGUgPiBkdCA+IGFcIikub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoXCJhY3RpdmVcIikpIHtcblxuICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50KCkubmV4dCgpLnNsaWRlVXAoXCJlYXNlT3V0RXhwb1wiKTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudCA9ICQodGhpcykucGFyZW50KCkubmV4dChcImRkXCIpO1xuICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5uZXh0KCkuc2xpZGVEb3duKFwiZWFzZU91dEV4cG9cIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gU3RpY2t5IEhlYWRlclxuICAgIHZhciBzdGlja3lfaGVhZGVyID0gZnVuY3Rpb24gKCR0aGlzKSB7XG4gICAgICAgICQoXCI8ZGl2IGNsYXNzPSdibGFuay1zcGFjZSc+PC9kaXY+XCIpLmluc2VydEFmdGVyKFwiI2hlYWRlclwiKTtcbiAgICAgICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICh3aW5kb3cuc2Nyb2xsWSA+IDAgJiYgISQoJy5tb2JpbGUtdG9nZ2xlJykuaXMoXCI6dmlzaWJsZVwiKSkge1xuICAgICAgICAgICAgICAgICQoJyNoZWFkZXInKS5hZGRDbGFzcygnc3RpY2t5Jyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoJyNoZWFkZXInKS5yZW1vdmVDbGFzcygnc3RpY2t5Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIElTT1RPUEUgR29cbiAgICB2YXIgaXNvdG9wZV9nbyA9IGZ1bmN0aW9uKCR0aGlzKSB7XG4gICAgICAgIHZhciAkY29udGFpbmVyID0gJCgnLmlzb3RvcGUtY29udGFpbmVyJyk7XG4gICAgICAgICRjb250YWluZXIuaXNvdG9wZSh7XG4gICAgICAgICAgICBpdGVtU2VsZWN0b3I6ICcuaXNvdG9wZS1pdGVtJyxcbiAgICAgICAgICAgIGxheW91dE1vZGU6ICdtYXNvbnJ5JyxcbiAgICAgICAgICAgIGZpbHRlcjogJyonLFxuICAgICAgICAgICAgYW5pbWF0aW9uT3B0aW9uczoge1xuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA3NTAsXG4gICAgICAgICAgICAgICAgZWFzaW5nOiAnbGluZWFyJyxcbiAgICAgICAgICAgICAgICBxdWV1ZTogZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgICQoJ3VsLnBvcnRmb2xpby1maWx0ZXIgYScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtZmlsdGVyJyk7XG4gICAgICAgICAgICAkY29udGFpbmVyLmlzb3RvcGUoe1xuICAgICAgICAgICAgICAgIGZpbHRlcjogc2VsZWN0b3IsXG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uT3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogNzUwLFxuICAgICAgICAgICAgICAgICAgICBlYXNpbmc6ICdsaW5lYXInLFxuICAgICAgICAgICAgICAgICAgICBxdWV1ZTogZmFsc2VcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgJG9wdGlvblNldHMgPSAkKCd1bC5wb3J0Zm9saW8tZmlsdGVyJyksXG4gICAgICAgICAgICRvcHRpb25MaW5rcyA9ICRvcHRpb25TZXRzLmZpbmQoJ2EnKTtcblxuICAgICAgICAgICAkb3B0aW9uTGlua3Mub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICAgICAgICAvLyBkb24ndCBwcm9jZWVkIGlmIGFscmVhZHkgc2VsZWN0ZWRcbiAgICAgICAgICBpZiAoICR0aGlzLmhhc0NsYXNzKCdzZWxlY3RlZCcpICkge1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB2YXIgJG9wdGlvblNldCA9ICR0aGlzLnBhcmVudHMoJ3VsLnBvcnRmb2xpby1maWx0ZXInKTtcbiAgICAgICAgICAgJG9wdGlvblNldC5maW5kKCcuc2VsZWN0ZWQnKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgJHRoaXMuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB2YXIgaXNvdG9wZV9maXRfcm93cyA9IGZ1bmN0aW9uKCR0aGlzKSB7XG4gICAgICAgIHZhciAkY29udGFpbmVyID0gJCgnLmlzb3RvcGUtZml0LXJvd3MnKTtcbiAgICAgICAgJGNvbnRhaW5lci5pc290b3BlKHtcbiAgICAgICAgICAgIGxheW91dE1vZGU6ICdmaXRSb3dzJyxcbiAgICAgICAgICAgIGl0ZW1TZWxlY3RvcjogJy5pc290b3BlLWl0ZW0nXG4gICAgICAgIH0pO1xuICAgIH1cblxufSkoalF1ZXJ5KTtcblxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
