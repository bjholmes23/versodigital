!function(e){"use strict";function i(){var i=e(window).height();e(".fullscreen").children(".container").each(function(t){var a=e(this).innerHeight()+270;a>=i?e(this).parent(".fullscreen").addClass("not-overflow"):e(this).parent(".fullscreen").removeClass("not-overflow")})}e(document).ready(function(){s(e(this)),n(),t(e),r(),l(e(this)),d(e(this)),h(e(this)),u(e(this)),m(e(this)),v(e(this)),o(e(this)),c(e(this))}),jQuery(window).load(function(){f(e(this)),s(e(this)),n(),p(e(this)),w(e(this)),m(e(this)),e(".section").each(function(){a(e(this))})}),jQuery(window).resize(function(){p(e(this))});var t=function(i){e(".hero-slider").flexslider({animation:"fade",direction:"horizontal",animationSpeed:1e3,animationLoop:!0,smoothHeight:!1,directionNav:!1,controlsContainer:".hero-controls",controlNav:!0,slideshow:!0,useCSS:!0,after:function(i){e("li.flex-active-slide").hasClass("dark-slider")?e(".header").addClass("white-header"):e(".header").removeClass("white-header"),e("li.flex-active-slide").hasClass("white-slider")?e(".header").addClass("black-header"):e(".header").removeClass("black-header")},start:function(i){e("li.flex-active-slide").hasClass("dark-slider")?e(".header").addClass("inverse-header"):e(".header").removeClass("inverse-header"),e("li.flex-active-slide").hasClass("white-slider")?e(".header").addClass("black-header"):e(".header").removeClass("black-header")}}),e(".flex-prev, .flex-next").on("click",function(){var i=e(this).attr("href");return e(".hero-slider").flexslider(i),!1}),e(".flexslider").flexslider({animation:"fade",controlNav:!0,useCSS:!0,directionNav:!1})},a=function(e){e.find(".animate").each(function(e){var i=jQuery(this),t=i.data("animate");i.waypoint(function(a){i.css({"-webkit-animation-delay":.1*e+"s","-moz-animation-delay":.1*e+"s","-ms-animation-delay":.1*e+"s","-o-animation-delay":.1*e+"s","animation-delay":.1*e+"s"}),i.removeClass("animate").addClass("animated "+t).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){jQuery(this).removeClass(t+" animated")})},{offset:"80%",triggerOnce:!0})})},n=function(i){e.stellar({horizontalScrolling:!1,responsive:!0})},o=function(i){e(".video-background").each(function(){e(this).YTPlayer({videoURL:e(this).data("video-id"),containment:"self",showControls:!1,autoPlay:!0,loop:!0,mute:!0,startAt:0,opacity:1,addRaster:!0,quality:"default"})})},s=function(t){t.find(".fullscreen").each(function(){var t=e(this),a=function(){t.height(e(window).height()),i()};a(),e(window).resize(function(){a()})})},r=function(i){var t=function(){e(window).width()>991?e(".auto-height").each(function(){var i=e(this),t=(i.height(),i.parent().parent().height());i.css("height",t)}):e(".auto-height").each(function(){var i=e(this);i.css("height","auto")})};t(),e(window).resize(function(){t()})},l=function(i){i.find(".progress-bar").each(function(){var i=e(this);i.waypoint(function(e){i.css("width",i.attr("aria-valuenow")+"%")},{offset:"80%",triggerOnce:!0})})},d=function(i){e(".menu-toggle").on("click",function(){e(this).closest("header").toggleClass("menu-open"),e(this).closest("header").hasClass("menu-3")&&e(this).toggleClass("active")});var t=function(){e(window).width()<991?e(".menu").addClass("mobile-menu"):e(".menu").removeClass("mobile-menu")};t(),e(window).resize(function(){t()})},c=function(i){var t=e(".mobile-menu");t.find("li.dropdown").hover(function(){var i=e(this);i.find(">.dropdown-menu").slideDown()},function(){e(this).find(">.dropdown-menu").slideUp()})},h=function(i){e(".owl-carousel").each(function(){var i=e(this);i.owlCarousel({loop:!0,margin:0,responsiveClass:!0,responsive:{0:{items:1,nav:!0},768:{items:i.data("col-sm"),nav:!1},992:{items:i.data("col-md"),nav:!0,loop:!1},1200:{items:i.data("col-lg"),nav:!0,loop:!1}}})})},u=function(e){jQuery(function(){var e=jQuery(".section"),i=jQuery(".menu a");e.waypoint({handler:function(e){var t;t=jQuery(this),"up"===e&&(t=t.prev());var a=jQuery('.menu a[href="#'+t.attr("id")+'"]');i.removeClass("active"),a.addClass("active"),t.addClass("active-section")},offset:"35%"})}),jQuery(".menu").localScroll({offset:-60,duration:500})},f=function(i){e(".loader").css("opacity",0),setTimeout(function(){e(".loader").hide(),e("body").addClass("loaded")},600)},v=function(i){e('[data-toggle="tooltip"]').tooltip();var t;e(".nav-tabs > li > a").on("click",function(){e(this).parent("li").hasClass("active")||(t=e(".tab-content > .tab-pane").filter(e(this).attr("href")).height(),e(".tab-content").animate({height:t},function(){e(".tab-content").css("height","auto")}))});var a=e(".accordion > dd").hide();a.first().slideDown("easeOutExpo"),e(".accordion > dt > a").first().addClass("active"),e(".accordion > dt > a").on("click",function(){var i=e(this).parent().next("dd");return e(".accordion > dt > a").removeClass("active"),e(this).addClass("active"),a.not(i).slideUp("easeInExpo"),e(this).parent().next().slideDown("easeOutExpo"),!1});e(".toggle > dd").hide();e(".toggle > dt > a").on("click",function(){if(e(this).hasClass("active"))e(this).parent().next().slideUp("easeOutExpo"),e(this).removeClass("active");else{e(this).parent().next("dd");e(this).addClass("active"),e(this).parent().next().slideDown("easeOutExpo")}return!1})},m=function(i){e("<div class='blank-space'></div>").insertAfter("#header"),e(window).scroll(function(){window.scrollY>0&&!e(".mobile-toggle").is(":visible")?e("#header").addClass("sticky"):e("#header").removeClass("sticky")})},p=function(i){var t=e(".isotope-container");t.isotope({itemSelector:".isotope-item",layoutMode:"masonry",filter:"*",animationOptions:{duration:750,easing:"linear",queue:!1}}),e("ul.portfolio-filter a").on("click",function(){var i=e(this).attr("data-filter");return t.isotope({filter:i,animationOptions:{duration:750,easing:"linear",queue:!1}}),!1});var a=e("ul.portfolio-filter"),n=a.find("a");n.on("click",function(){var i=e(this);if(i.hasClass("selected"))return!1;var t=i.parents("ul.portfolio-filter");t.find(".selected").removeClass("selected"),i.addClass("selected")})},w=function(i){var t=e(".isotope-fit-rows");t.isotope({layoutMode:"fitRows",itemSelector:".isotope-item"})}}(jQuery);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOlsiJCIsImZ1bGxzY3JlZW5GaXgiLCJoIiwid2luZG93IiwiaGVpZ2h0IiwiY2hpbGRyZW4iLCJlYWNoIiwiaSIsImhjIiwidGhpcyIsImlubmVySGVpZ2h0IiwicGFyZW50IiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImRvY3VtZW50IiwicmVhZHkiLCJmdWxsc2NyZWVuX3NlY3Rpb24iLCJwYXJhbGxheF9pbWFnZSIsImZsZXhfc2xpZGVyIiwiZml4X2hlaWdodCIsInByb2dyZXNzX2JhciIsIm1vYmlsZV9uYXYiLCJvd2xfY2Fyb3VzZWwiLCJvbmVfcGFnZV9zY3JvbGwiLCJzdGlja3lfaGVhZGVyIiwiYnNfdG9vbHRpcCIsInlvdXR1YmVfYmciLCJtb2JpbGVfdG91Y2giLCJqUXVlcnkiLCJsb2FkIiwic2l0ZV9sb2FkZXIiLCJpc290b3BlX2dvIiwiaXNvdG9wZV9maXRfcm93cyIsImFuaW1hdGVfc3RhcnQiLCJyZXNpemUiLCIkdGhpcyIsImZsZXhzbGlkZXIiLCJhbmltYXRpb24iLCJkaXJlY3Rpb24iLCJhbmltYXRpb25TcGVlZCIsImFuaW1hdGlvbkxvb3AiLCJzbW9vdGhIZWlnaHQiLCJkaXJlY3Rpb25OYXYiLCJjb250cm9sc0NvbnRhaW5lciIsImNvbnRyb2xOYXYiLCJzbGlkZXNob3ciLCJ1c2VDU1MiLCJhZnRlciIsInNsaWRlciIsImhhc0NsYXNzIiwic3RhcnQiLCJvbiIsImhyZWYiLCJhdHRyIiwiZmluZCIsIiRpdGVtIiwiZGF0YSIsIndheXBvaW50IiwiY3NzIiwiLXdlYmtpdC1hbmltYXRpb24tZGVsYXkiLCItbW96LWFuaW1hdGlvbi1kZWxheSIsIi1tcy1hbmltYXRpb24tZGVsYXkiLCItby1hbmltYXRpb24tZGVsYXkiLCJhbmltYXRpb24tZGVsYXkiLCJvbmUiLCJvZmZzZXQiLCJ0cmlnZ2VyT25jZSIsInN0ZWxsYXIiLCJob3Jpem9udGFsU2Nyb2xsaW5nIiwicmVzcG9uc2l2ZSIsIllUUGxheWVyIiwidmlkZW9VUkwiLCJjb250YWlubWVudCIsInNob3dDb250cm9scyIsImF1dG9QbGF5IiwibG9vcCIsIm11dGUiLCJzdGFydEF0Iiwib3BhY2l0eSIsImFkZFJhc3RlciIsInF1YWxpdHkiLCJyZXNpemVfaGVpZ2h0IiwiYXV0b19oZWlnaHQiLCJ3aWR0aCIsImVsZW1lbnQiLCJwYXJlbnRfaGVpZ2h0IiwiY2xvc2VzdCIsInRvZ2dsZUNsYXNzIiwiYWRkX21tX2NsYXNzIiwiJG1lbnUiLCJob3ZlciIsInNsaWRlRG93biIsInNsaWRlVXAiLCJvd2xDYXJvdXNlbCIsIm1hcmdpbiIsInJlc3BvbnNpdmVDbGFzcyIsIjAiLCJpdGVtcyIsIm5hdiIsIjc2OCIsIjk5MiIsIjEyMDAiLCJzZWN0aW9ucyIsIm5hdmlnYXRpb25fbGlua3MiLCJoYW5kbGVyIiwiYWN0aXZlX3NlY3Rpb24iLCJwcmV2IiwiYWN0aXZlX2xpbmsiLCJsb2NhbFNjcm9sbCIsImR1cmF0aW9uIiwic2V0VGltZW91dCIsImhpZGUiLCJ0b29sdGlwIiwidGFiX2hlaWdodCIsImZpbHRlciIsImFuaW1hdGUiLCJhbGxQYW5lbHMiLCJmaXJzdCIsImN1cnJlbnQiLCJuZXh0Iiwibm90IiwiaW5zZXJ0QWZ0ZXIiLCJzY3JvbGwiLCJzY3JvbGxZIiwiaXMiLCIkY29udGFpbmVyIiwiaXNvdG9wZSIsIml0ZW1TZWxlY3RvciIsImxheW91dE1vZGUiLCJhbmltYXRpb25PcHRpb25zIiwiZWFzaW5nIiwicXVldWUiLCJzZWxlY3RvciIsIiRvcHRpb25TZXRzIiwiJG9wdGlvbkxpbmtzIiwiJG9wdGlvblNldCIsInBhcmVudHMiXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEdBQ0EsWUFxS0EsU0FBQUMsS0FDQSxHQUFBQyxHQUFBRixFQUFBRyxRQUFBQyxRQUVBSixHQUFBLGVBQUFLLFNBQUEsY0FBQUMsS0FBQSxTQUFBQyxHQUNBLEdBQUFDLEdBQUFSLEVBQUFTLE1BQUFDLGNBQUEsR0FDQUYsSUFBQU4sRUFDQUYsRUFBQVMs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QWtCLEVBQUEsU0FBQUksR0FDQSxHQUFBMEYsR0FBQTdILEVBQUEscUJBQ0E2SCxHQUFBQyxTQUNBQyxhQUFBLGdCQUNBQyxXQUFBLFVBQ0FkLE9BQUEsSUFDQWUsa0JBQ0FwQixTQUFBLElBQ0FxQixPQUFBLFNBQ0FDLE9BQUEsS0FHQW5JLEVBQUEseUJBQUFtRCxHQUFBLFFBQUEsV0FDQSxHQUFBaUYsR0FBQXBJLEVBQUFTLE1BQUE0QyxLQUFBLGNBU0EsT0FSQXdFLEdBQUFDLFNBQ0FaLE9BQUFrQixFQUNBSCxrQkFDQXBCLFNBQUEsSUFDQXFCLE9BQUEsU0FDQUMsT0FBQSxNQUdBLEdBRUEsSUFBQUUsR0FBQXJJLEVBQUEsdUJBQ0FzSSxFQUFBRCxFQUFBL0UsS0FBQSxJQUVBZ0YsR0FBQW5GLEdBQUEsUUFBQSxXQUNBLEdBQUFoQixHQUFBbkMsRUFBQVMsS0FFQSxJQUFBMEIsRUFBQWMsU0FBQSxZQUNBLE9BQUEsQ0FFQSxJQUFBc0YsR0FBQXBHLEVBQUFxRyxRQUFBLHNCQUNBRCxHQUFBakYsS0FBQSxhQUFBekMsWUFBQSxZQUNBc0IsRUFBQXZCLFNBQUEsZUFHQW9CLEVBQUEsU0FBQUcsR0FDQSxHQUFBMEYsR0FBQTdILEVBQUEsb0JBQ0E2SCxHQUFBQyxTQUNBRSxXQUFBLFVBQ0FELGFBQUEsb0JBSUFuRyIsImZpbGUiOiJzY3JpcHRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCQpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIGZ1bGxzY3JlZW5fc2VjdGlvbigkKHRoaXMpKTtcbiAgICAgICAgcGFyYWxsYXhfaW1hZ2UoKTtcbiAgICAgICAgZmxleF9zbGlkZXIoJCk7XG4gICAgICAgIGZpeF9oZWlnaHQoKTtcbiAgICAgICAgcHJvZ3Jlc3NfYmFyKCQodGhpcykpO1xuICAgICAgICBtb2JpbGVfbmF2KCQodGhpcykpO1xuICAgICAgICBvd2xfY2Fyb3VzZWwoJCh0aGlzKSk7XG4gICAgICAgIG9uZV9wYWdlX3Njcm9sbCgkKHRoaXMpKTtcbiAgICAgICAgc3RpY2t5X2hlYWRlcigkKHRoaXMpKTtcbiAgICAgICAgYnNfdG9vbHRpcCgkKHRoaXMpKTtcbiAgICAgICAgeW91dHViZV9iZygkKHRoaXMpKTtcbiAgICAgICAgLy9zY3JvbGxfZG93bigkKHRoaXMpKTtcbiAgICAgICAgbW9iaWxlX3RvdWNoKCQodGhpcykpO1xuICAgIH0pO1xuXG4gICAgLyogV2luZG93IExvYWQvQWxsIE1lZGlhIExvYWRlZCAqL1xuICAgIGpRdWVyeSh3aW5kb3cpLmxvYWQoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgc2l0ZV9sb2FkZXIoJCh0aGlzKSk7XG4gICAgICAgIGZ1bGxzY3JlZW5fc2VjdGlvbigkKHRoaXMpKTtcbiAgICAgICAgcGFyYWxsYXhfaW1hZ2UoKTtcbiAgICAgICAgaXNvdG9wZV9nbygkKHRoaXMpKTtcbiAgICAgICAgaXNvdG9wZV9maXRfcm93cygkKHRoaXMpKTtcbiAgICAgICAgc3RpY2t5X2hlYWRlcigkKHRoaXMpKTtcblxuICAgICAgICAkKCcuc2VjdGlvbicpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBhbmltYXRlX3N0YXJ0KCQodGhpcykpO1xuICAgICAgICB9KTtcblxuICAgIH0pO1xuXG4gICAgalF1ZXJ5KHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCkge1xuICAgICAgICBpc290b3BlX2dvKCQodGhpcykpO1xuICAgIH0pO1xuXG4gICAgLy9cbiAgICAvLyAgRlVOQ1RJT05TXG4gICAgLy9cblxuICAgIC8vIEZsZXggc2xpZGVyXG4gICAgdmFyIGZsZXhfc2xpZGVyID0gZnVuY3Rpb24oJHRoaXMpe1xuICAgICAgICAkKCcuaGVyby1zbGlkZXInKS5mbGV4c2xpZGVyKHtcbiAgICAgICAgICAgIGFuaW1hdGlvbjogXCJmYWRlXCIsXG4gICAgICAgICAgICBkaXJlY3Rpb246IFwiaG9yaXpvbnRhbFwiLFxuICAgICAgICAgICAgYW5pbWF0aW9uU3BlZWQ6IDEwMDAsXG4gICAgICAgICAgICBhbmltYXRpb25Mb29wOiB0cnVlLFxuICAgICAgICAgICAgc21vb3RoSGVpZ2h0OiBmYWxzZSxcbiAgICAgICAgICAgIGRpcmVjdGlvbk5hdjogZmFsc2UsXG4gICAgICAgICAgICBjb250cm9sc0NvbnRhaW5lcjogXCIuaGVyby1jb250cm9sc1wiLFxuICAgICAgICAgICAgY29udHJvbE5hdjogdHJ1ZSxcbiAgICAgICAgICAgIHNsaWRlc2hvdzogdHJ1ZSxcbiAgICAgICAgICAgIHVzZUNTUzogdHJ1ZSxcblxuICAgICAgICAgICAgLy8gZm9yIFRyYW5zcGFyZW50IEhlYWRlclxuICAgICAgICAgICAgYWZ0ZXI6IGZ1bmN0aW9uKHNsaWRlcil7XG4gICAgICAgICAgICAgICAgaWYoJCgnbGkuZmxleC1hY3RpdmUtc2xpZGUnKS5oYXNDbGFzcyhcImRhcmstc2xpZGVyXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmhlYWRlcicpLmFkZENsYXNzKCd3aGl0ZS1oZWFkZXInKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5oZWFkZXInKS5yZW1vdmVDbGFzcygnd2hpdGUtaGVhZGVyJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKCQoJ2xpLmZsZXgtYWN0aXZlLXNsaWRlJykuaGFzQ2xhc3MoXCJ3aGl0ZS1zbGlkZXJcIikpe1xuICAgICAgICAgICAgICAgICAgICAkKCcuaGVhZGVyJykuYWRkQ2xhc3MoJ2JsYWNrLWhlYWRlcicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmhlYWRlcicpLnJlbW92ZUNsYXNzKCdibGFjay1oZWFkZXInKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3RhcnQ6IGZ1bmN0aW9uKHNsaWRlcil7XG4gICAgICAgICAgICAgICAgaWYoJCgnbGkuZmxleC1hY3RpdmUtc2xpZGUnKS5oYXNDbGFzcyhcImRhcmstc2xpZGVyXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmhlYWRlcicpLmFkZENsYXNzKCdpbnZlcnNlLWhlYWRlcicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmhlYWRlcicpLnJlbW92ZUNsYXNzKCdpbnZlcnNlLWhlYWRlcicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZigkKCdsaS5mbGV4LWFjdGl2ZS1zbGlkZScpLmhhc0NsYXNzKFwid2hpdGUtc2xpZGVyXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmhlYWRlcicpLmFkZENsYXNzKCdibGFjay1oZWFkZXInKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5oZWFkZXInKS5yZW1vdmVDbGFzcygnYmxhY2staGVhZGVyJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAkKCcuZmxleC1wcmV2LCAuZmxleC1uZXh0Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZhciBocmVmID0gJCh0aGlzKS5hdHRyKCdocmVmJyk7XG4gICAgICAgICAgICAkKCcuaGVyby1zbGlkZXInKS5mbGV4c2xpZGVyKGhyZWYpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pXG5cbiAgICAgICAgJCgnLmZsZXhzbGlkZXInKS5mbGV4c2xpZGVyKHtcbiAgICAgICAgICAgIGFuaW1hdGlvbjogXCJmYWRlXCIsXG4gICAgICAgICAgICBjb250cm9sTmF2OiB0cnVlLFxuICAgICAgICAgICAgdXNlQ1NTOiB0cnVlLFxuICAgICAgICAgICAgZGlyZWN0aW9uTmF2OiBmYWxzZVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBBbmltYXRpb24gd2l0aCBXYXlwb2ludHMuanNcbiAgICB2YXIgYW5pbWF0ZV9zdGFydCA9IGZ1bmN0aW9uKCR0aGlzKSB7XG4gICAgICAgICR0aGlzLmZpbmQoJy5hbmltYXRlJykuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgICAgICB2YXIgJGl0ZW0gPSBqUXVlcnkodGhpcyk7XG4gICAgICAgICAgICB2YXIgYW5pbWF0aW9uID0gJGl0ZW0uZGF0YShcImFuaW1hdGVcIik7XG5cbiAgICAgICAgICAgICRpdGVtLndheXBvaW50KGZ1bmN0aW9uKGRpcmVjdGlvbikge1xuICAgICAgICAgICAgICAgICRpdGVtLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICctd2Via2l0LWFuaW1hdGlvbi1kZWxheSc6IChpICogMC4xKSArIFwic1wiLFxuICAgICAgICAgICAgICAgICAgICAnLW1vei1hbmltYXRpb24tZGVsYXknOiAoaSAqIDAuMSkgKyBcInNcIixcbiAgICAgICAgICAgICAgICAgICAgJy1tcy1hbmltYXRpb24tZGVsYXknOiAoaSAqIDAuMSkgKyBcInNcIixcbiAgICAgICAgICAgICAgICAgICAgJy1vLWFuaW1hdGlvbi1kZWxheSc6IChpICogMC4xKSArIFwic1wiLFxuICAgICAgICAgICAgICAgICAgICAnYW5pbWF0aW9uLWRlbGF5JzogKGkgKiAwLjEpICsgXCJzXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAkaXRlbS5yZW1vdmVDbGFzcygnYW5pbWF0ZScpLmFkZENsYXNzKCdhbmltYXRlZCAnICsgYW5pbWF0aW9uKS5vbmUoJ3dlYmtpdEFuaW1hdGlvbkVuZCBtb3pBbmltYXRpb25FbmQgTVNBbmltYXRpb25FbmQgb2FuaW1hdGlvbmVuZCBhbmltYXRpb25lbmQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLnJlbW92ZUNsYXNzKGFuaW1hdGlvbiArICcgYW5pbWF0ZWQnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBvZmZzZXQ6ICc4MCUnLFxuICAgICAgICAgICAgICAgIHRyaWdnZXJPbmNlOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vICBQYXJhbGxheCBCYWNrZ3JvdW5kIChTdGVsbGFyLmpzKVxuICAgIHZhciBwYXJhbGxheF9pbWFnZSA9IGZ1bmN0aW9uKCR0aGlzKXtcbiAgICAgICAgJC5zdGVsbGFyKHtcbiAgICAgICAgICAgIGhvcml6b250YWxTY3JvbGxpbmc6IGZhbHNlLFxuICAgICAgICAgICAgcmVzcG9uc2l2ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gWW91dHViZSBWaWRlbyBCYWNrZ3JvdW5kXG4gICAgdmFyIHlvdXR1YmVfYmcgPSBmdW5jdGlvbigkdGhpcyl7XG4gICAgICAgICQoJy52aWRlby1iYWNrZ3JvdW5kJykuZWFjaChmdW5jdGlvbigpe1xuICAgICAgICAgICAgJCh0aGlzKS5ZVFBsYXllcih7XG4gICAgICAgICAgICAgICAgdmlkZW9VUkw6ICQodGhpcykuZGF0YSgndmlkZW8taWQnKSxcbiAgICAgICAgICAgICAgICBjb250YWlubWVudDonc2VsZicsXG4gICAgICAgICAgICAgICAgc2hvd0NvbnRyb2xzOmZhbHNlLFxuICAgICAgICAgICAgICAgIGF1dG9QbGF5OnRydWUsXG4gICAgICAgICAgICAgICAgbG9vcDp0cnVlLFxuICAgICAgICAgICAgICAgIG11dGU6dHJ1ZSxcbiAgICAgICAgICAgICAgICBzdGFydEF0OjAsXG4gICAgICAgICAgICAgICAgb3BhY2l0eToxLFxuICAgICAgICAgICAgICAgIGFkZFJhc3Rlcjp0cnVlLFxuICAgICAgICAgICAgICAgIHF1YWxpdHk6J2RlZmF1bHQnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gRnVsbHNjcmVlbiBTZWN0aW9uXG4gICAgdmFyIGZ1bGxzY3JlZW5fc2VjdGlvbiA9IGZ1bmN0aW9uKCR0aGlzKSB7XG4gICAgICAgICR0aGlzLmZpbmQoJy5mdWxsc2NyZWVuJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG4gICAgICAgICAgICB2YXIgcmVzaXplX2hlaWdodCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAkdGhpcy5oZWlnaHQoJCh3aW5kb3cpLmhlaWdodCgpKTtcbiAgICAgICAgICAgICAgICAgICAgZnVsbHNjcmVlbkZpeCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzaXplX2hlaWdodCgpO1xuICAgICAgICAgICAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXNpemVfaGVpZ2h0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZ1bGxzY3JlZW5GaXgoKXtcbiAgICAgICAgdmFyIGggPSAkKHdpbmRvdykuaGVpZ2h0KCk7XG4gICAgICAgIC8vIHNldCAuZnVsbHNjcmVlbiBoZWlnaHRcbiAgICAgICAgJChcIi5mdWxsc2NyZWVuXCIpLmNoaWxkcmVuKFwiLmNvbnRhaW5lclwiKS5lYWNoKGZ1bmN0aW9uKGkpe1xuICAgICAgICAgICAgdmFyIGhjID0gJCh0aGlzKS5pbm5lckhlaWdodCgpICsgMjcwO1xuICAgICAgICAgICAgaWYoaGMgPj0gaCl7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoXCIuZnVsbHNjcmVlblwiKS5hZGRDbGFzcyhcIm5vdC1vdmVyZmxvd1wiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoXCIuZnVsbHNjcmVlblwiKS5yZW1vdmVDbGFzcyhcIm5vdC1vdmVyZmxvd1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gRml4IEhlaWdodFxuICAgIHZhciBmaXhfaGVpZ2h0ID0gZnVuY3Rpb24oJHRoaXMpIHtcbiAgICAgICAgdmFyIGF1dG9faGVpZ2h0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPiA5OTEpIHtcbiAgICAgICAgICAgICAgICAkKCcuYXV0by1oZWlnaHQnKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9ICQodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSBlbGVtZW50LmhlaWdodCgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGFyZW50X2hlaWdodCA9IGVsZW1lbnQucGFyZW50KCkucGFyZW50KCkuaGVpZ2h0KCk7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY3NzKCdoZWlnaHQnLCBwYXJlbnRfaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCgnLmF1dG8taGVpZ2h0JykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSAkKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNzcygnaGVpZ2h0JywgJ2F1dG8nKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBhdXRvX2hlaWdodCgpO1xuICAgICAgICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgYXV0b19oZWlnaHQoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gUHJvZ3Jlc3MgQmFyXG4gICAgdmFyIHByb2dyZXNzX2JhciA9IGZ1bmN0aW9uKCR0aGlzKSB7XG4gICAgICAgICR0aGlzLmZpbmQoJy5wcm9ncmVzcy1iYXInKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcblxuICAgICAgICAgICAgJHRoaXMud2F5cG9pbnQoZnVuY3Rpb24oZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgJHRoaXMuY3NzKCd3aWR0aCcsICR0aGlzLmF0dHIoJ2FyaWEtdmFsdWVub3cnKSArICclJyk7XG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgb2Zmc2V0OiAnODAlJyxcbiAgICAgICAgICAgICAgICB0cmlnZ2VyT25jZTogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIE1vYmlsZSBNZW51XG4gICAgdmFyIG1vYmlsZV9uYXYgPWZ1bmN0aW9uKCR0aGlzKSB7XG4gICAgICAgICQoJy5tZW51LXRvZ2dsZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCdoZWFkZXInKS50b2dnbGVDbGFzcygnbWVudS1vcGVuJyk7XG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5jbG9zZXN0KCdoZWFkZXInKS5oYXNDbGFzcygnbWVudS0zJykpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBhZGRfbW1fY2xhc3MgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8IDk5MSkge1xuICAgICAgICAgICAgICAgICQoJy5tZW51JykuYWRkQ2xhc3MoJ21vYmlsZS1tZW51JylcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCgnLm1lbnUnKS5yZW1vdmVDbGFzcygnbW9iaWxlLW1lbnUnKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGFkZF9tbV9jbGFzcygpO1xuICAgICAgICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgYWRkX21tX2NsYXNzKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBNb2JpbGUgdG91Y2hcbiAgICB2YXIgbW9iaWxlX3RvdWNoID0gZnVuY3Rpb24oJHRoaXMpe1xuXG4gICAgICAgIHZhciAkbWVudSA9ICQoXCIubW9iaWxlLW1lbnVcIik7XG4gICAgICAgICRtZW51LmZpbmQoJ2xpLmRyb3Bkb3duJykuaG92ZXIoXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJz4uZHJvcGRvd24tbWVudScpLnNsaWRlRG93bigpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnPi5kcm9wZG93bi1tZW51Jykuc2xpZGVVcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuXG4gICAgfVxuXG4gICAgLy8gT1dMIENhcm91c2VsXG4gICAgdmFyIG93bF9jYXJvdXNlbCA9IGZ1bmN0aW9uKCR0aGlzKSB7XG4gICAgICAgICQoJy5vd2wtY2Fyb3VzZWwnKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICAgICAgICAgICR0aGlzLm93bENhcm91c2VsKHtcbiAgICAgICAgICAgICAgICBsb29wOiB0cnVlLFxuICAgICAgICAgICAgICAgIG1hcmdpbjogMCxcbiAgICAgICAgICAgICAgICByZXNwb25zaXZlQ2xhc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2l2ZToge1xuICAgICAgICAgICAgICAgICAgICAwOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtczogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hdjogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICA3Njg6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiAkdGhpcy5kYXRhKCdjb2wtc20nKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hdjogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgOTkyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtczogJHRoaXMuZGF0YSgnY29sLW1kJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBuYXY6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBsb29wOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAxMjAwOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtczogJHRoaXMuZGF0YSgnY29sLWxnJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBuYXY6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBsb29wOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIE9uZSBQYWdlIFNjcm9sbGluZyBNZW51XG4gICAgdmFyIG9uZV9wYWdlX3Njcm9sbCA9IGZ1bmN0aW9uICgkdGhpcykge1xuICAgICAgICBqUXVlcnkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgc2VjdGlvbnMgPSBqUXVlcnkoJy5zZWN0aW9uJyk7XG4gICAgICAgICAgICB2YXIgbmF2aWdhdGlvbl9saW5rcyA9IGpRdWVyeSgnLm1lbnUgYScpO1xuICAgICAgICAgICAgc2VjdGlvbnMud2F5cG9pbnQoe1xuICAgICAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24oZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFjdGl2ZV9zZWN0aW9uO1xuICAgICAgICAgICAgICAgIGFjdGl2ZV9zZWN0aW9uID0galF1ZXJ5KHRoaXMpO1xuICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT09IFwidXBcIikgYWN0aXZlX3NlY3Rpb24gPSBhY3RpdmVfc2VjdGlvbi5wcmV2KCk7XG4gICAgICAgICAgICAgICAgdmFyIGFjdGl2ZV9saW5rID0galF1ZXJ5KCcubWVudSBhW2hyZWY9XCIjJyArIGFjdGl2ZV9zZWN0aW9uLmF0dHIoXCJpZFwiKSArICdcIl0nKTtcbiAgICAgICAgICAgICAgICBuYXZpZ2F0aW9uX2xpbmtzLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgICAgIGFjdGl2ZV9saW5rLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgICAgIGFjdGl2ZV9zZWN0aW9uLmFkZENsYXNzKFwiYWN0aXZlLXNlY3Rpb25cIik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb2Zmc2V0OiAnMzUlJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFNDUk9MTCBET1dOXG4gICAgICAgIGpRdWVyeSgnLm1lbnUnKS5sb2NhbFNjcm9sbCh7XG4gICAgICAgICAgICBvZmZzZXQ6IC02MCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiA1MDBcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gU2Nyb2xsIERvd24gTW5ldVxuICAgIHZhciBzY3JvbGxfZG93biA9IGZ1bmN0aW9uKCR0aGlzKSB7XG4gICAgICAgICQoJ2FbaHJlZio9I106bm90KFtocmVmPSNdKTpub3QoW2RhdGEtdG9nZ2xlPVwidGFiXCJdKScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKGxvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoL15cXC8vLCcnKSA9PSB0aGlzLnBhdGhuYW1lLnJlcGxhY2UoL15cXC8vLCcnKSAmJiBsb2NhdGlvbi5ob3N0bmFtZSA9PSB0aGlzLmhvc3RuYW1lKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9ICQodGhpcy5oYXNoKTtcbiAgICAgICAgICAgICAgICB0YXJnZXQgPSB0YXJnZXQubGVuZ3RoID8gdGFyZ2V0IDogJCgnW25hbWU9JyArIHRoaXMuaGFzaC5zbGljZSgxKSArJ10nKTtcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAkKCdodG1sLGJvZHknKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiB0YXJnZXQub2Zmc2V0KCkudG9wIC0gNjBcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFJlbW92ZSBQYWdlIExvYWRlciBTY3JlZW4gRnVuY3Rpb25cbiAgICB2YXIgc2l0ZV9sb2FkZXIgPSBmdW5jdGlvbigkdGhpcykge1xuICAgICAgICAkKCcubG9hZGVyJykuY3NzKCdvcGFjaXR5JywgMCk7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKCcubG9hZGVyJykuaGlkZSgpO1xuICAgICAgICAgICAgJCgnYm9keScpLmFkZENsYXNzKCdsb2FkZWQnKVxuICAgICAgICB9LCA2MDApO1xuICAgIH1cbiAgICAvLyBCb290c3RyYXAgVG9vbHRpcFxuICAgIHZhciBic190b29sdGlwID0gZnVuY3Rpb24oJHRoaXMpIHtcbiAgICAgICAgJCgnW2RhdGEtdG9nZ2xlPVwidG9vbHRpcFwiXScpLnRvb2x0aXAoKVxuXG4gICAgICAgIHZhciB0YWJfaGVpZ2h0O1xuICAgICAgICAkKFwiLm5hdi10YWJzID4gbGkgPiBhXCIpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgIGlmICghKCQodGhpcykucGFyZW50KFwibGlcIikuaGFzQ2xhc3MoXCJhY3RpdmVcIikpKSB7XG4gICAgICAgICAgICAgICAgdGFiX2hlaWdodCA9ICQoXCIudGFiLWNvbnRlbnQgPiAudGFiLXBhbmVcIikuZmlsdGVyKCQodGhpcykuYXR0cihcImhyZWZcIikpLmhlaWdodCgpO1xuICAgICAgICAgICAgICAgICQoXCIudGFiLWNvbnRlbnRcIikuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogdGFiX2hlaWdodFxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICQoXCIudGFiLWNvbnRlbnRcIikuY3NzKFwiaGVpZ2h0XCIsIFwiYXV0b1wiKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEFjY29yZGlvblxuICAgICAgICB2YXIgYWxsUGFuZWxzID0gJChcIi5hY2NvcmRpb24gPiBkZFwiKS5oaWRlKCk7XG4gICAgICAgIGFsbFBhbmVscy5maXJzdCgpLnNsaWRlRG93bihcImVhc2VPdXRFeHBvXCIpO1xuICAgICAgICAkKFwiLmFjY29yZGlvbiA+IGR0ID4gYVwiKS5maXJzdCgpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuXG4gICAgICAgICQoXCIuYWNjb3JkaW9uID4gZHQgPiBhXCIpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgIHZhciBjdXJyZW50ID0gJCh0aGlzKS5wYXJlbnQoKS5uZXh0KFwiZGRcIik7XG4gICAgICAgICAgICAkKFwiLmFjY29yZGlvbiA+IGR0ID4gYVwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICBhbGxQYW5lbHMubm90KGN1cnJlbnQpLnNsaWRlVXAoXCJlYXNlSW5FeHBvXCIpO1xuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5uZXh0KCkuc2xpZGVEb3duKFwiZWFzZU91dEV4cG9cIik7XG5cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBUb2dnbGVcbiAgICAgICAgdmFyIGFsbFRvZ2dsZXMgPSAkKFwiLnRvZ2dsZSA+IGRkXCIpLmhpZGUoKTtcblxuICAgICAgICAkKFwiLnRvZ2dsZSA+IGR0ID4gYVwiKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcyhcImFjdGl2ZVwiKSkge1xuXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5uZXh0KCkuc2xpZGVVcChcImVhc2VPdXRFeHBvXCIpO1xuICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50ID0gJCh0aGlzKS5wYXJlbnQoKS5uZXh0KFwiZGRcIik7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLm5leHQoKS5zbGlkZURvd24oXCJlYXNlT3V0RXhwb1wiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBTdGlja3kgSGVhZGVyXG4gICAgdmFyIHN0aWNreV9oZWFkZXIgPSBmdW5jdGlvbiAoJHRoaXMpIHtcbiAgICAgICAgJChcIjxkaXYgY2xhc3M9J2JsYW5rLXNwYWNlJz48L2Rpdj5cIikuaW5zZXJ0QWZ0ZXIoXCIjaGVhZGVyXCIpO1xuICAgICAgICAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHdpbmRvdy5zY3JvbGxZID4gMCAmJiAhJCgnLm1vYmlsZS10b2dnbGUnKS5pcyhcIjp2aXNpYmxlXCIpKSB7XG4gICAgICAgICAgICAgICAgJCgnI2hlYWRlcicpLmFkZENsYXNzKCdzdGlja3knKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCgnI2hlYWRlcicpLnJlbW92ZUNsYXNzKCdzdGlja3knKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gSVNPVE9QRSBHb1xuICAgIHZhciBpc290b3BlX2dvID0gZnVuY3Rpb24oJHRoaXMpIHtcbiAgICAgICAgdmFyICRjb250YWluZXIgPSAkKCcuaXNvdG9wZS1jb250YWluZXInKTtcbiAgICAgICAgJGNvbnRhaW5lci5pc290b3BlKHtcbiAgICAgICAgICAgIGl0ZW1TZWxlY3RvcjogJy5pc290b3BlLWl0ZW0nLFxuICAgICAgICAgICAgbGF5b3V0TW9kZTogJ21hc29ucnknLFxuICAgICAgICAgICAgZmlsdGVyOiAnKicsXG4gICAgICAgICAgICBhbmltYXRpb25PcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDc1MCxcbiAgICAgICAgICAgICAgICBlYXNpbmc6ICdsaW5lYXInLFxuICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgJCgndWwucG9ydGZvbGlvLWZpbHRlciBhJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZhciBzZWxlY3RvciA9ICQodGhpcykuYXR0cignZGF0YS1maWx0ZXInKTtcbiAgICAgICAgICAgICRjb250YWluZXIuaXNvdG9wZSh7XG4gICAgICAgICAgICAgICAgZmlsdGVyOiBzZWxlY3RvcixcbiAgICAgICAgICAgICAgICBhbmltYXRpb25PcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA3NTAsXG4gICAgICAgICAgICAgICAgICAgIGVhc2luZzogJ2xpbmVhcicsXG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciAkb3B0aW9uU2V0cyA9ICQoJ3VsLnBvcnRmb2xpby1maWx0ZXInKSxcbiAgICAgICAgICAgJG9wdGlvbkxpbmtzID0gJG9wdGlvblNldHMuZmluZCgnYScpO1xuXG4gICAgICAgICAgICRvcHRpb25MaW5rcy5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuICAgICAgICAgIC8vIGRvbid0IHByb2NlZWQgaWYgYWxyZWFkeSBzZWxlY3RlZFxuICAgICAgICAgIGlmICggJHRoaXMuaGFzQ2xhc3MoJ3NlbGVjdGVkJykgKSB7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIHZhciAkb3B0aW9uU2V0ID0gJHRoaXMucGFyZW50cygndWwucG9ydGZvbGlvLWZpbHRlcicpO1xuICAgICAgICAgICAkb3B0aW9uU2V0LmZpbmQoJy5zZWxlY3RlZCcpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICAgICAkdGhpcy5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHZhciBpc290b3BlX2ZpdF9yb3dzID0gZnVuY3Rpb24oJHRoaXMpIHtcbiAgICAgICAgdmFyICRjb250YWluZXIgPSAkKCcuaXNvdG9wZS1maXQtcm93cycpO1xuICAgICAgICAkY29udGFpbmVyLmlzb3RvcGUoe1xuICAgICAgICAgICAgbGF5b3V0TW9kZTogJ2ZpdFJvd3MnLFxuICAgICAgICAgICAgaXRlbVNlbGVjdG9yOiAnLmlzb3RvcGUtaXRlbSdcbiAgICAgICAgfSk7XG4gICAgfVxuXG59KShqUXVlcnkpO1xuXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
